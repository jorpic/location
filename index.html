<!DOCTYPE html><html><head><title>− Определение местоположения</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta charset="utf-8"><style>*{margin:0;padding:0}body{flex-direction:column;height:100vh;max-width:50rem;margin:auto}body,header{display:flex}header{justify-content:space-between;align-items:center;padding:.5em}svg{display:flex;flex:1;border:1px solid red}</style></head><body><header><div><p id="info1"></p><p id="info2"></p></div><button>Отправить координаты</button></header><svg id="svg"><g id="tiles"></g><g id="pin"><g transform="translate(-12 -36) scale(0.5)" fill="#880096"><path d="M24,0 C11,0 0,10 0,22 C0,35 10,50 24,72 C37,50 48,35 48,22 C48,10 36,0 24,0 L24,0 Z M24,33 C19,33 15,28 15,24 C15,19 19,15 24,15 C28,15 33,19 33,24 C33,28 28,33 24,33 L24,33 Z"></path></g></g></svg><script>var t=function(t,n,o){return t.addEventListener(n,o,!1)},n=function(t){return document.getElementById(t)},o=n("info"),a=n("svg"),e=16,c=Math.pow(2,e-1),r=255,i=Math.PI;function u(t){var n=t.lon,o=t.lat*i/180;return{x:(n+180)/180*c,y:(1-Math.log(Math.tan(o)+1/Math.cos(o))/i)*c}}function l(t){var n=t.x,o=t.y;return{lon:180*(n/c-1),lat:180*Math.atan(Math.sinh(i*(1-o/c)))/i}}var s={tiles:n("tiles"),pin:n("pin"),dx:0,dy:0},d=Math.floor(a.clientWidth/2),f=Math.floor(a.clientHeight/2);function g(t){s.lon=t.lon,s.lat=t.lat;var n=u(t),o=n.x,a=n.y,c=Math.floor(o),i=Math.floor(a);s.originX=c,s.originY=i;for(var l=0,g=[-1,0];l<g.length;l++)for(var p=g[l],v=0,m=[-1,0];v<m.length;v++){var x=m[v],y=document.createElementNS("http://www.w3.org/2000/svg","image"),M="abc"[Math.floor(12*Math.random())%3];y.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","https://".concat(M,".tile.openstreetmap.org/").concat(e,"/").concat(c+p,"/").concat(i+x,".png")),y.setAttribute("x",r*p),y.setAttribute("y",r*x),s.tiles.appendChild(y)}s.pin.setAttribute("transform","translate(".concat(d," ").concat(f,")")),h(r*(o-c),r*(a-i))}function h(t,o){s.dx+=t,s.dy+=o,s.tiles.setAttribute("transform","translate(".concat(d-s.dx," ").concat(f-s.dy,")"));var a=l({x:s.originX+s.dx/r,y:s.originY+s.dy/r}),e=a.lon,c=a.lat;n("info2").textContent="(".concat(c.toFixed(6),", ").concat(e.toFixed(6),")")}function p(){var n,o,e=function(t){return t.touches?t.touches[0]:t},c=!1;function r(t){t.preventDefault(),c=!0;var a=e(t);n=a.pageX,o=a.pageY}function i(t){if(c){var a=e(t);h(n-a.pageX,o-a.pageY),n=a.pageX,o=a.pageY}}t(a,"mousedown",r),t(a,"touchstart",r),t(a,"mousemove",i),t(a,"touchmove",i),t(document.body,"mouseup",function(t){c=!1})}function v(t){var o={lat:t.coords.latitude,lon:t.coords.longitude,accuracy:t.coords.accuracy};n("info1").textContent="(".concat(o.lat,", ").concat(o.lon,") с точностью ±").concat(o.accuracy," метров."),g(o),p()}function m(t){v({coords:{latitude:55.583357,longitude:37.596508,accuracy:11}}),p()}navigator.geolocation.getCurrentPosition(v,m);</script></body></html>